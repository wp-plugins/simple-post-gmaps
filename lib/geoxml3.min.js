if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"");};}geoXML3=window.geoXML3||{};geoXML3.parser=function(k){var i=geoXML3.combineOptions(k,{singleInfoWindow:false,processStyles:true,zoom:true});var f=[];var a;var e=function(n){if(typeof n==="string"){n=[n];}var m={docSet:[],remaining:n.length,parserOnly:!i.afterParse};var o;for(var l=0;l<n.length;l++){o={url:n[l],internals:m};m.docSet.push(o);geoXML3.fetchXML(o.url,function(p){b(p,o);});}};var h=function(m){var l;for(l=0;l<m.markers.length;l++){this.markers[l].set_visible(false);}for(l=0;l<m.overlays.length;l++){m.overlays[l].setOpacity(0);}};var d=function(m){var l;for(l=0;l<m.markers.length;l++){m.markers[l].set_visible(true);}for(l=0;l<m.overlays.length;l++){m.overlays[l].setOpacity(m.overlays[l].percentOpacity_);}};var b=function(x,w){if(!x){geoXML3.log("Unable to retrieve "+w.url);if(i.failedParse){i.failedParse(w);}}else{if(!w){throw"geoXML3 internal error: render called with null document";}else{w.styles={};w.placemarks=[];w.groundOverlays=[];if(i.zoom&&!!i.map){w.bounds=new google.maps.LatLngBounds();}var z,t,s;var n=x.getElementsByTagName("Style");for(s=0;s<n.length;s++){z=n[s].getAttribute("id");t=n[s].getElementsByTagName("Icon");if(!!t.length){w.styles["#"+z]={href:geoXML3.nodeValue(t[0].getElementsByTagName("href")[0])};}}if(!!i.processStyles||!i.createMarker){g(w);}var u,o,v,y;var r=x.getElementsByTagName("Placemark");for(s=0;s<r.length;s++){o=r[s];u={name:geoXML3.nodeValue(o.getElementsByTagName("name")[0]),permalink:geoXML3.nodeValue(o.getElementsByTagName("permalink")[0]),description:geoXML3.nodeValue(o.getElementsByTagName("description")[0]),styleUrl:geoXML3.nodeValue(o.getElementsByTagName("styleUrl")[0])};u.style=w.styles[u.styleUrl]||{};if(/^https?:\/\//.test(u.description)){u.description='<a href="'+u.description+'">'+u.description+"</a>";}v=geoXML3.nodeValue(o.getElementsByTagName("coordinates")[0]).trim();v=v.replace(/\s+/g," ").replace(/, /g,",");y=v.split(" ");if(y.length===1){v=y[0].split(",");u.point={lat:parseFloat(v[1]),lng:parseFloat(v[0]),alt:parseFloat(v[2])};if(!!w.bounds){w.bounds.extend(new google.maps.LatLng(u.point.lat,u.point.lng));}if(!!i.createMarker){i.createMarker(u,w);}else{j(u,w);}}}var p,q,m;var l=x.getElementsByTagName("GroundOverlay");for(s=0;s<l.length;s++){o=l[s];p={name:geoXML3.nodeValue(o.getElementsByTagName("name")[0]),permalink:geoXML3.nodeValue(o.getElementsByTagName("permalink")[0]),description:geoXML3.nodeValue(o.getElementsByTagName("description")[0]),icon:{href:geoXML3.nodeValue(o.getElementsByTagName("href")[0])},latLonBox:{north:parseFloat(geoXML3.nodeValue(o.getElementsByTagName("north")[0])),east:parseFloat(geoXML3.nodeValue(o.getElementsByTagName("east")[0])),south:parseFloat(geoXML3.nodeValue(o.getElementsByTagName("south")[0])),west:parseFloat(geoXML3.nodeValue(o.getElementsByTagName("west")[0]))}};if(!!w.bounds){w.bounds.union(new google.maps.LatLngBounds(new google.maps.LatLng(p.latLonBox.south,p.latLonBox.west),new google.maps.LatLng(p.latLonBox.north,p.latLonBox.east)));}q=geoXML3.nodeValue(o.getElementsByTagName("color")[0]);if((q!=="")&&(q.length==8)){m=parseInt(q.substring(0,2),16);p.opacity=Math.round((255-m)/2.55);}else{p.opacity=100;}if(!!i.createOverlay){i.createOverlay(p,w);}else{c(p,w);}}if(!!w.bounds){w.internals.bounds=w.internals.bounds||new google.maps.LatLngBounds();w.internals.bounds.union(w.bounds);}if(!!w.styles||!!w.markers||!!w.overlays){w.internals.parserOnly=false;}w.internals.remaining-=1;if(w.internals.remaining===0){if(!!w.internals.bounds){i.map.fitBounds(w.internals.bounds);}if(i.afterParse){i.afterParse(w.internals.docSet);}if(!w.internals.parserOnly){f.concat(w.internals.docSet);}}}}};var g=function(m){for(var l in m.styles){if(!!m.styles[l].href){m.styles[l].icon=new google.maps.MarkerImage(m.styles[l].href,new google.maps.Size(30,48));}}};var j=function(o,p){var n=geoXML3.combineOptions(i.markerOptions,{map:i.map,position:new google.maps.LatLng(o.point.lat,o.point.lng),title:o.name,zIndex:Math.round(-o.point.lat*100000),icon:o.style.icon,shadow:o.style.shadow});var m=new google.maps.Marker(n);var l=html_entity_decode(geoxml3L10n.tooltip);l=l.replace(/%permalink%/g,o.permalink);l=l.replace(/%description%/g,o.description);l=l.replace(/%title%/g,o.name);l=l.replace(/%readmore%/g,geoxml3L10n.readmore);var q=geoXML3.combineOptions(i.infoWindowOptions,{width:300,content:l});m.infoWindow=new google.maps.InfoWindow(q);google.maps.event.addListener(m,"click",function(){if(!!i.singleInfoWindow){if(!!a&&!!a.infoWindow){a.infoWindow.close();}a=this;}this.infoWindow.open(this.map,this);});if(!!p){p.markers=p.markers||[];p.markers.push(m);}return m;};var c=function(p,o){if(!window.ProjectedOverlay){throw"geoXML3 error: ProjectedOverlay not found while rendering GroundOverlay from KML";}var m=new google.maps.LatLngBounds(new google.maps.LatLng(p.latLonBox.south,p.latLonBox.west),new google.maps.LatLng(p.latLonBox.north,p.latLonBox.east));var n=geoXML3.combineOptions(i.overlayOptions,{percentOpacity:p.opacity});var l=new ProjectedOverlay(i.map,p.icon.href,m,n);if(!!o){o.overlays=o.overlays||[];o.overlays.push(l);}return;};return{options:i,docs:f,parse:e,hideDocument:h,showDocument:d,processStyles:g,createMarker:j,createOverlay:c};};geoXML3.log=function(a){if(!!window.console){console.log(a);}};geoXML3.combineOptions=function(c,b){var a={};if(!!c){for(var d in c){if(c.hasOwnProperty(d)){a[d]=c[d];}}}if(!!b){for(d in b){if(b.hasOwnProperty(d)&&(a[d]===undefined)){a[d]=b[d];}}}return a;};geoXML3.fetchers=[];geoXML3.fetchXML=function(a,d){function b(){d();}var c;if(!!geoXML3.fetchers.length){c=geoXML3.fetchers.pop();}else{if(!!window.XMLHttpRequest){c=new window.XMLHttpRequest();}else{if(!!window.ActiveXObject){c=new window.ActiveXObject("Microsoft.XMLHTTP");}}}if(!c){geoXML3.log("Unable to create XHR object");d(null);}else{c.open("GET",a,true);c.onreadystatechange=function(){if(c.readyState===4){if(!!c.timeout){clearTimeout(c.timeout);}if(c.status>=400){geoXML3.log("HTTP error "+c.status+" retrieving "+a);d();}else{d(c.responseXML);}geoXML3.fetchers.push(c);}};c.timeout=setTimeout(b,60000);c.send(null);}};geoXML3.nodeValue=function(a){if(!(a.innerText||a.text||a.textContent)){return"";}else{return(a.innerText||a.text||a.textContent).trim();}};function get_html_translation_table(i,g){var d={},f={},c=0,a="";var e={},b={};var j={},h={};e[0]="HTML_SPECIALCHARS";e[1]="HTML_ENTITIES";b[0]="ENT_NOQUOTES";b[2]="ENT_COMPAT";b[3]="ENT_QUOTES";j=!isNaN(i)?e[i]:i?i.toUpperCase():"HTML_SPECIALCHARS";h=!isNaN(g)?b[g]:g?g.toUpperCase():"ENT_COMPAT";if(j!=="HTML_SPECIALCHARS"&&j!=="HTML_ENTITIES"){throw new Error("Table: "+j+" not supported");}d["38"]="&amp;";if(j==="HTML_ENTITIES"){d["160"]="&nbsp;";d["161"]="&iexcl;";d["162"]="&cent;";d["163"]="&pound;";d["164"]="&curren;";d["165"]="&yen;";d["166"]="&brvbar;";d["167"]="&sect;";d["168"]="&uml;";d["169"]="&copy;";d["170"]="&ordf;";d["171"]="&laquo;";d["172"]="&not;";d["173"]="&shy;";d["174"]="&reg;";d["175"]="&macr;";d["176"]="&deg;";d["177"]="&plusmn;";d["178"]="&sup2;";d["179"]="&sup3;";d["180"]="&acute;";d["181"]="&micro;";d["182"]="&para;";d["183"]="&middot;";d["184"]="&cedil;";d["185"]="&sup1;";d["186"]="&ordm;";d["187"]="&raquo;";d["188"]="&frac14;";d["189"]="&frac12;";d["190"]="&frac34;";d["191"]="&iquest;";d["192"]="&Agrave;";d["193"]="&Aacute;";d["194"]="&Acirc;";d["195"]="&Atilde;";d["196"]="&Auml;";d["197"]="&Aring;";d["198"]="&AElig;";d["199"]="&Ccedil;";d["200"]="&Egrave;";d["201"]="&Eacute;";d["202"]="&Ecirc;";d["203"]="&Euml;";d["204"]="&Igrave;";d["205"]="&Iacute;";d["206"]="&Icirc;";d["207"]="&Iuml;";d["208"]="&ETH;";d["209"]="&Ntilde;";d["210"]="&Ograve;";d["211"]="&Oacute;";d["212"]="&Ocirc;";d["213"]="&Otilde;";d["214"]="&Ouml;";d["215"]="&times;";d["216"]="&Oslash;";d["217"]="&Ugrave;";d["218"]="&Uacute;";d["219"]="&Ucirc;";d["220"]="&Uuml;";d["221"]="&Yacute;";d["222"]="&THORN;";d["223"]="&szlig;";d["224"]="&agrave;";d["225"]="&aacute;";d["226"]="&acirc;";d["227"]="&atilde;";d["228"]="&auml;";d["229"]="&aring;";d["230"]="&aelig;";d["231"]="&ccedil;";d["232"]="&egrave;";d["233"]="&eacute;";d["234"]="&ecirc;";d["235"]="&euml;";d["236"]="&igrave;";d["237"]="&iacute;";d["238"]="&icirc;";d["239"]="&iuml;";d["240"]="&eth;";d["241"]="&ntilde;";d["242"]="&ograve;";d["243"]="&oacute;";d["244"]="&ocirc;";d["245"]="&otilde;";d["246"]="&ouml;";d["247"]="&divide;";d["248"]="&oslash;";d["249"]="&ugrave;";d["250"]="&uacute;";d["251"]="&ucirc;";d["252"]="&uuml;";d["253"]="&yacute;";d["254"]="&thorn;";d["255"]="&yuml;";}if(h!=="ENT_NOQUOTES"){d["34"]="&quot;";}if(h==="ENT_QUOTES"){d["39"]="&#39;";}d["60"]="&lt;";d["62"]="&gt;";for(c in d){a=String.fromCharCode(c);f[a]=d[c];}return f;}function html_entity_decode(c,f){var e={},d="",a="",b="";a=c.toString();if(false===(e=this.get_html_translation_table("HTML_ENTITIES",f))){return false;}delete (e["&"]);e["&"]="&amp;";for(d in e){b=e[d];a=a.split(b).join(d);}a=a.split("&#039;").join("'");return a;}